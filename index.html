<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StadiaStudios | App Store</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="assets/favicon.png">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for aesthetic enhancements */
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
        }
        .text-shadow {
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
        }
        /* Style for the 'Use Link' button to ensure it's visually distinct */
        .app-get-button {
             box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
        }

        /* Custom Scrollbar Styles */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #1f1f1f; /* card-dark */
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: #4B4B4B; /* Darker gray for thumb */
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: orange; /* accent-red on hover */
        }
    </style>
    <script>
        // --- Tailwind Configuration ---
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary-dark': '#121212',
                        'card-dark': '#1f1f1f',
                        'text-light': '#ffffff',
                        'accent-red': 'orange', /* Using a bright orange as the main accent */
                        'button-red': '#cc0000',
                        'button-blue': '#1e90ff', /* NEW: Blue color for the button */
                    }
                }
            }
        }
        
        // --- Global Application State & Constants ---
        let isMenuOpen = false;

        /**
         * Toggles the mobile hamburger menu state and visibility.
         */
        const toggleMenu = () => {
            isMenuOpen = !isMenuOpen;
            const menu = document.getElementById('mobileMenu');
            const menuButton = document.getElementById('menuButton');

            if (menu) {
                // Toggles the 'hidden' class based on the state of isMenuOpen
                menu.classList.toggle('hidden', !isMenuOpen);
            }
            if (menuButton) {
                 // Change the icon to 'X' when open
                menuButton.innerHTML = isMenuOpen
                    ? '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>'
                    : '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>';
            }
        };

        // --- App Store Data & Rendering Logic ---

        // Mock data for the app listings - ADDED 'url' property to enable link redirection
        const apps = [
            { id: 1, title: "ID Finder Tool", subtitle: "Paste YouTube URLs to instantly get its Video ID.", category: "Utility", rating: 1.2, icon: "assets/app/none.jpg", url: "webapp/idfinder.html" },
            { id: 2, title: "PassPro", subtitle: "This app is a Free Password manager app.", category: "Security", rating: 4.5, icon: "assets/app/passpro.png", url: "https://stadiastudios.github.io/passpro/" },
            { id: 3, title: "YT Sub Link Generator", subtitle: "Generate YouTube subscription links with ease.", category: "Developer Tools", rating: 1.3, icon: "assets/app/ytslg.png", url: "webapp/ytsubgen/gen.html" },
            { id: 4, title: "IMG Extracter", subtitle: "Extract images from URLs quickly and easily.", category: "Developer Tools", rating: 3.5, icon: "assets/app/imgextracter.png", url: "webapp/imgextracter/index.html" },
            { id: 5, title: "Gdrive Generator", subtitle: "Generate direct download links for Google Drive files.", category: "Developer Tools", rating: 4.7, icon: "assets/app/gdrive.png", url: "webapp/gdrivegen/run.html" },
            { id: 6, title: "Our Journey", subtitle: "A app to track your relationship date.", category: "Social", rating: 4.0, icon: "assets/app/ourjourney.png", url: "https://stadiastudios.github.io/ourjourney/splash" },
            { id: 7, title: "GameDrive", subtitle: "Backup Game files to a Save Local Drive", "category": "Storage", "rating": 2.3, "icon": "assets/app/gamedrive.png", "url": "webapp/gamedrive/index.html" },
        ];

        /**
         * Generates the HTML for a single App Card.
         */
        const renderAppCard = (app) => {
            return `
                <div class="card-hover bg-card-dark p-4 rounded-xl shadow-lg flex items-center space-x-4 transition duration-300 transform border border-gray-700 hover:border-accent-red">
                    <!-- Icon (Now an image) -->
                    <div class="w-14 h-14 shrink-0 rounded-2xl overflow-hidden">
                        <img src="${app.icon}" alt="${app.title} Icon" class="w-full h-full object-cover"/>
                    </div>
                    <!-- Details -->
                    <div class="flex-grow min-w-0">
                        <h3 class="text-text-light font-bold truncate">${app.title}</h3>
                        <p class="text-gray-400 text-xs truncate">${app.subtitle || app.category}</p>
                        <div class="flex items-center space-x-1 text-sm text-gray-400 mt-1">
                            <span class="text-yellow-400">â˜…</span>
                            <span>${app.rating.toFixed(1)}</span>
                            <span class="text-gray-600">|</span>
                            <span>${app.size || 'Free'}</span>
                        </div>
                    </div>
                    <!-- Use Button: Text changed to 'Use' and added data-url/app-link-button for JS listener -->
                    <button data-url="${app.url}" class="app-link-button app-get-button bg-button-blue hover:bg-blue-700 text-white font-semibold py-1 px-4 rounded-full text-sm transition duration-150 shrink-0">
                        Use
                    </button>
                </div>
            `;
        };

        /**
         * Renders the list of apps in the main grid container.
         * @param {Array} appsToDisplay - The list of apps to render.
         * @param {string} title - The section title.
         */
        const renderAppsList = (appsToDisplay, title = "Recommended Apps") => {
            const appListContainer = document.getElementById('recommended-apps-list-container');
            if (!appListContainer) return;

            const listHtml = `
                <h2 class="text-2xl md:text-3xl font-bold text-text-light mb-6 text-left border-b border-gray-700 pb-2">${title} (${appsToDisplay.length})</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${appsToDisplay.map(renderAppCard).join('')}
                </div>
            `;
            appListContainer.innerHTML = listHtml;
        };

        /**
         * Filters the app list based on a query and re-renders the list.
         */
        const filterApps = (query) => {
            const lowerCaseQuery = query.toLowerCase().trim();
            
            let filteredList = apps;
            let title = "Recommended Apps";

            if (lowerCaseQuery.length > 0) {
                filteredList = apps.filter(app => 
                    app.title.toLowerCase().includes(lowerCaseQuery) ||
                    app.subtitle.toLowerCase().includes(lowerCaseQuery) ||
                    app.category.toLowerCase().includes(lowerCaseQuery)
                );
                title = "Search Results";
            }
            
            // Render only the list section with the filtered apps
            renderAppsList(filteredList, title);
        };
        
        /**
         * Renders the static structure of the App Store (Called only once on load).
         */
        const renderAppStore = () => {
            const mainContent = document.getElementById('main-app-store-content');
            if (!mainContent) return;

            // Placeholder for the Recommended/Search Results list
            const recommendedContainerHtml = '<section class="mb-12" id="recommended-apps-list-container"></section>';

            mainContent.innerHTML = recommendedContainerHtml;

            // Initial render of the Recommended Apps list (calls filterApps with empty query)
            filterApps(''); 
        };

        // Initialize mobile menu toggle listener AND render content
        window.onload = () => {
            document.getElementById('menuButton').addEventListener('click', toggleMenu);
            renderAppStore();

            // Add search listener
            const searchInput = document.getElementById('appSearchInput');
            if (searchInput) {
                // Use the 'input' event for real-time filtering as the user types
                searchInput.addEventListener('input', (e) => {
                    filterApps(e.target.value);
                });
            }

            // --- NEW: Global Listener for App Link Buttons ---
            // Attaches a single listener to the document to handle clicks on dynamically generated buttons
            document.addEventListener('click', (e) => {
                // Find the closest button element with the class 'app-link-button'
                const button = e.target.closest('.app-link-button');
                if (button) {
                    const url = button.getAttribute('data-url');
                    if (url) {
                        window.location.href = url;
                    }
                }
            });
            // --------------------------------------------------
        };
    </script>
</head>
<body class="bg-primary-dark text-text-light font-sans min-h-screen">

    <!-- Top Navigation Bar (Reverted to original StadiaStudios style + Search Bar) -->
    <nav class="bg-card-dark shadow-md sticky top-0 z-10">
        <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo/Title (Original StadiaStudios Logo) -->
                <h1 class="text-3xl font-extrabold text-[orange] tracking-wider">StadiaStudios <span class="text-white text-xl font-light"></span></h1>

                <!-- Desktop Navigation Links (Original links + Search Bar) -->
                <div class="hidden lg:flex items-center space-x-6">
                    <a href="index.html" class="text-accent-red font-bold transition duration-150 text-sm font-medium border-b-2 border-accent-red">Home</a>
                    <a href="tos.pdf" target="_blank" class="text-gray-300 hover:text-accent-red transition duration-150 text-sm font-medium">Terms of Service</a>
                    
                    <!-- Tools Dropdown (Desktop - Original Structure) -->
                    <div class="relative group pt-2 pb-2">
                        <button class="flex items-center text-gray-300 group-hover:text-accent-red transition duration-150 text-sm font-medium">
                            <span>Tools</span>
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <!-- Dropdown Menu -->
                        <div class="absolute right-0 top-full w-48 bg-card-dark border border-gray-700 rounded-md shadow-lg py-1 z-10
                                    opacity-0 pointer-events-none transform scale-95 group-hover:opacity-100 group-hover:scale-100 group-hover:pointer-events-auto
                                    transition-all duration-200 ease-in-out origin-top-right">
                            <a href="webapp/idfinder.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-[orange] hover:text-black">ID Finder</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-[orange] hover:text-black">Analytics</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-[orange] hover:text-black">Settings</a>
                        </div>
                    </div>
                    
                    <!-- Search Bar (KEPT) -->
                    <div class="relative ml-6">
                        <input type="text" id="appSearchInput" placeholder="Search Apps, Games..." class="bg-[#333] text-gray-200 text-sm rounded-full py-1 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-accent-red transition duration-150 w-48">
                        <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                </div>

                <!-- Mobile Menu Button (Hidden on desktop) -->
                <button id="menuButton" class="lg:hidden p-2 rounded-lg text-gray-300 hover:text-accent-red hover:bg-orange-800 transition duration-150" aria-label="Toggle menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu Panel (Original links) -->
        <div id="mobileMenu" class="hidden lg:hidden bg-[#222] border-t border-gray-700">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="index.html" class="block px-3 py-2 rounded-md text-base font-medium text-accent-red bg-[#222]">Home</a>
                <a href="tos.pdf" target="_blank" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-{#111} hover:text-white">TOS</a>
                <!-- Tools are simplified into mobile links -->
                <a href="webapp/idfinder.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-{#111} hover:text-white">ID Finder</a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-{#111} hover:text-white">Analytics</a>
                <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-{#111} hover:text-white">Settings</a>
            </div>
        </div>
    </nav>
    
    <!-- Main App Store Content Area -->
    <div id="main-app-store-content" class="max-w-screen-xl mx-auto p-4 md:p-8 pt-6 md:pt-12">
        <!-- Content will be injected by JavaScript's renderAppStore() function -->
    </div>

<footer class="text-center text-gray-500 py-8">Welcome to the Website Overhaul! New Things coming soon stick around or add app to homescreen in the meantime!</footer>

</body>
</html>
